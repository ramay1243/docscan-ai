<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å | DocScan AI</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">DocScan AI</a>
                <nav class="main-nav">
                    <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/articles" class="nav-link">–°—Ç–∞—Ç—å–∏</a>
                    <a href="/news" class="nav-link">–ù–æ–≤–æ—Å—Ç–∏</a>
                    <a href="/questions" class="nav-link active">–í–æ–ø—Ä–æ—Å—ã</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <section class="container" style="max-width: 800px; margin: 40px auto; padding: 0 20px;">
        <h1 style="margin-bottom: 30px;">‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</h1>
        
        <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <form id="questionForm">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                    <select id="category" required style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 1rem;">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        {% for cat in categories %}
                        <option value="{{ cat }}">{{ cat }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–æ–ø—Ä–æ—Å–∞ *</label>
                    <input type="text" id="title" required placeholder="–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å" 
                           style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 1rem;">
                    <small style="color: #999; font-size: 0.9rem;">–ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã</small>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;">–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ *</label>
                    <textarea id="content" required rows="10" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –ø–æ–¥—Ä–æ–±–Ω–æ. –ß–µ–º –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ç." 
                              style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 1rem; font-family: inherit; resize: vertical;"></textarea>
                    <small style="color: #999; font-size: 0.9rem;">–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, —É–∫–∞–∂–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏</small>
                </div>
                
                <div style="background: #f7fafc; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    <strong style="display: block; margin-bottom: 10px;">üí° –°–æ–≤–µ—Ç—ã –¥–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:</strong>
                    <ul style="margin-left: 20px; color: #666; line-height: 1.8;">
                        <li>–ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –∏ –æ–ø–∏—Å—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é</li>
                        <li>–£–∫–∞–∂–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ (–¥–∞—Ç—ã, —Å—É–º–º—ã, –¥–æ–∫—É–º–µ–Ω—Ç—ã)</li>
                        <li>–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ —á–µ—Ç–∫–∏–π –≤–æ–ø—Ä–æ—Å</li>
                        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –ø–æ—Ö–æ–∂–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤</li>
                    </ul>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="submit" style="background: #667eea; color: white; border: none; padding: 12px 30px; border-radius: 5px; font-size: 1rem; font-weight: 600; cursor: pointer; flex: 1;">üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                    <a href="/questions" style="background: #e2e8f0; color: #2d3748; border: none; padding: 12px 30px; border-radius: 5px; font-size: 1rem; text-decoration: none; display: inline-block; text-align: center;">–û—Ç–º–µ–Ω–∞</a>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="main-footer" style="margin-top: 60px;">
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 DocScan AI. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('questionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const title = document.getElementById('title').value.trim();
            const content = document.getElementById('content').value.trim();
            const category = document.getElementById('category').value;
            
            if (!title || !content || !category) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const submitBtn = e.target.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = '–ü—É–±–ª–∏–∫–∞—Ü–∏—è...';
            
            try {
                const response = await fetch('/api/questions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include',
                    body: JSON.stringify({ title, content, category })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    window.location.href = '/questions/' + result.question_id;
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + result.error);
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å';
                }
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error);
                submitBtn.disabled = false;
                submitBtn.textContent = 'üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å';
            }
        });
    </script>
</body>
</html>

