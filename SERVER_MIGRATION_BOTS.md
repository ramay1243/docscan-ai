# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–æ—Ç–æ–≤ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤

## ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ GitHub

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ GitHub. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

## üìã –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –±–æ—Ç–æ–≤** (got, zgrab, GetIntent Crawler)
2. **–û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤** (`search_bots`)
3. **–ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±–æ—Ç–æ–≤
4. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** - –≥–æ—Å—Ç–∏ –∏ –±–æ—Ç—ã –±–æ–ª—å—à–µ –Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è

## üîß –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä
# –∏–ª–∏
ssh –≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å@–≤–∞—à_—Å–µ—Ä–≤–µ—Ä
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /var/www/docscan
# –∏–ª–∏ –≤–∞—à–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–í–ê–ñ–ù–û! –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π!**

```bash
# –ù–∞–π—Ç–∏ –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
python3 -c "from config import Config; print(Config.SQLALCHEMY_DATABASE_URI.replace('sqlite:///', ''))"

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
cp docscan.db docscan.db.backup_bots_$(date +%Y%m%d_%H%M%S)

# –ò–ª–∏ –µ—Å–ª–∏ –±–∞–∑–∞ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ:
cp /var/www/docscan/docscan.db /var/www/docscan/docscan.db.backup_bots_$(date +%Y%m%d_%H%M%S)
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ —Å GitHub

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É
git branch

# –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
ls -la utils/bot_detector.py
ls -la migrate_add_search_bots_table.py
ls -la MIGRATION_BOTS_TABLE.md
```

### –®–∞–≥ 5: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ supervisor
sudo supervisorctl stop docscan

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ systemd
sudo systemctl stop docscan

# –ò–ª–∏ –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –≤—Ä—É—á–Ω—É—é, –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
```

**–í–∞–∂–Ω–æ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π –ë–î!

### –®–∞–≥ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
cd /var/www/docscan

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
python3 migrate_add_search_bots_table.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
==================================================
–ú–∏–≥—Ä–∞—Ü–∏—è: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã search_bots
==================================================

üìÅ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: /var/www/docscan/docscan.db
üíæ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏...
‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞: /var/www/docscan/docscan.db.backup_bots_...
‚Üí –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É search_bots...
‚úÖ –¢–∞–±–ª–∏—Ü–∞ search_bots —Å–æ–∑–¥–∞–Ω–∞
‚úÖ –ò–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞–Ω
üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:
   - id (INTEGER)
   - ip_address (VARCHAR(50))
   - user_agent (VARCHAR(500))
   - bot_type (VARCHAR(50))
   - first_seen (VARCHAR(30))
   - last_seen (VARCHAR(30))
   - visits_count (INTEGER)
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

==================================================
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
==================================================
```

**–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
```
‚úì –¢–∞–±–ª–∏—Ü–∞ search_bots —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
sqlite3 docscan.db ".tables" | grep search_bots

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
sqlite3 docscan.db ".schema search_bots"

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
# CREATE TABLE search_bots (
#     id INTEGER PRIMARY KEY AUTOINCREMENT,
#     ip_address VARCHAR(50) NOT NULL,
#     user_agent VARCHAR(500),
#     bot_type VARCHAR(50) NOT NULL,
#     first_seen VARCHAR(30) NOT NULL,
#     last_seen VARCHAR(30) NOT NULL,
#     visits_count INTEGER DEFAULT 0
# );
```

### –®–∞–≥ 8: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ supervisor
sudo supervisorctl start docscan
sudo supervisorctl status docscan

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ systemd
sudo systemctl start docscan
sudo systemctl status docscan
```

### –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /var/log/docscan.out.log

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ journalctl
journalctl -u docscan -f
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "no such table: search_bots"
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `utils.bot_detector`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π –±–æ—Ç–æ–≤

### –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ https://docscan-ai.ru
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤–∫–ª–∞–¥–∫–∞ "üï∑Ô∏è –ü–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–µ–Ω—é
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –±–æ—Ç–æ–≤:**
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ —Å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–º –±–æ—Ç–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (403)

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**
   - –ù–∞ –≥–ª–∞–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –∞–¥–º–∏–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏:
     - "üï∑Ô∏è –ü–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤ –∑–∞ 24 —á–∞—Å–∞"
     - "üï∑Ô∏è –í—Å–µ–≥–æ –±–æ—Ç–æ–≤"
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
sqlite3 docscan.db ".tables"
```

–î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–∞–±–ª–∏—Ü–∞ `search_bots`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ –æ –±–æ—Ç–∞—Ö (–ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –±–æ—Ç—ã –∑–∞–π–¥—É—Ç)
sqlite3 docscan.db "SELECT COUNT(*) FROM search_bots;"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
sqlite3 docscan.db "SELECT * FROM search_bots ORDER BY last_seen DESC LIMIT 5;"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ –±–æ—Ç—ã –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –ª–æ–≥–∏:

```bash
# –ò—Å–∫–∞—Ç—å –∑–∞–ø–∏—Å–∏ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
grep "üö´" /var/log/docscan.out.log | tail -10

# –ò—Å–∫–∞—Ç—å –∑–∞–ø–∏—Å–∏ –æ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–∞—Ö
grep "üï∑Ô∏è" /var/log/docscan.out.log | tail -10
```

## ‚ö†Ô∏è –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo supervisorctl stop docscan

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
cp docscan.db.backup_bots_YYYYMMDD_HHMMSS docscan.db

# 3. –£–¥–∞–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É search_bots (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sqlite3 docscan.db "DROP TABLE IF EXISTS search_bots;"

# 4. –û—Ç–∫–∞—Ç–∏—Ç–µ –∫–æ–¥ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é
git log --oneline -10  # –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∫–æ–º–º–∏—Ç
git checkout <–ø—Ä–µ–¥—ã–¥—É—â–∏–π_–∫–æ–º–º–∏—Ç>

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo supervisorctl start docscan
```

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** - –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ backup –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π –ë–î
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "no such table: search_bots"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
python3 migrate_add_search_bots_table.py

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
sqlite3 docscan.db ".tables" | grep search_bots
```

### –ü—Ä–æ–±–ª–µ–º–∞: "database is locked"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
sudo supervisorctl stop docscan

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
python3 migrate_add_search_bots_table.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: "ModuleNotFoundError: No module named 'utils.bot_detector'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
git pull origin main

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la utils/bot_detector.py

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo supervisorctl restart docscan
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç—ã –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
tail -100 /var/log/docscan.out.log | grep -i bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω–∞
sqlite3 docscan.db "SELECT COUNT(*) FROM search_bots;"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
ls -la docscan.db
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í–∫–ª–∞–¥–∫–∞ "–ü–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã" –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
git pull origin main

# –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)
# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª routes/admin.py –æ–±–Ω–æ–≤–ª–µ–Ω
grep -n "search-bots" routes/admin.py
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω —Å GitHub (git pull)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ (`migrate_add_search_bots_table.py`)
- [ ] –¢–∞–±–ª–∏—Ü–∞ `search_bots` —Å–æ–∑–¥–∞–Ω–∞ –≤ –ë–î
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (–Ω–µ—Ç –æ—à–∏–±–æ–∫)
- [ ] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –í–∫–ª–∞–¥–∫–∞ "üï∑Ô∏è –ü–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ—Å—Ç–µ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** `/var/log/docscan.out.log`
2. **–õ–æ–≥–∏ supervisor:** `sudo supervisorctl tail -f docscan`
3. **–°—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** `sqlite3 docscan.db ".schema search_bots"`
4. **–ù–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤:** `ls -la utils/bot_detector.py`

## üéØ –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π:

```bash
cd /var/www/docscan && \
cp docscan.db docscan.db.backup_bots_$(date +%Y%m%d_%H%M%S) && \
git pull origin main && \
sudo supervisorctl stop docscan && \
python3 migrate_add_search_bots_table.py && \
sudo supervisorctl start docscan && \
echo "‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
```

**–í–Ω–∏–º–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏ —Å–æ–∑–¥–∞–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é!

## üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

**–°–æ–∑–¥–∞–Ω–æ:** 2025-01-XX  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

