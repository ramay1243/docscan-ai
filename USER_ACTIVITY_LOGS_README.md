# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ 24 —á–∞—Å–∞

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `get_user_activity_logs.py` –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite.

## –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:

1. **–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞ 24 —á–∞—Å–∞
2. **–ê–Ω–∞–ª–∏–∑—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –≤—Å–µ –∞–Ω–∞–ª–∏–∑—ã –∑–∞ –ø–µ—Ä–∏–æ–¥
3. **–ü–ª–∞—Ç–µ–∂–∏** - –≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏ —Å —Å—É–º–º–∞–º–∏
4. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞** - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
5. **–ù–∞–≥—Ä–∞–¥—ã –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º** - –≤—ã–ø–ª–∞—Ç—ã –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ
6. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≥–æ—Å—Ç–µ–π** - –ø–æ IP –∞–¥—Ä–µ—Å–∞–º
7. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
8. **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Å–≤–æ–¥–∫–∞ –∑–∞ 24 —á–∞—Å–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/docscan-ai

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
python3 get_user_activity_logs.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ systemd (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ cron)

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00):
0 0 * * * cd /path/to/docscan-ai && python3 get_user_activity_logs.py >> /var/log/docscan_activity.log 2>&1
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
python3 get_user_activity_logs.py > /tmp/user_activity_$(date +%Y%m%d_%H%M%S).txt

# –ò–ª–∏ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-8
python3 get_user_activity_logs.py | tee /tmp/user_activity_$(date +%Y%m%d_%H%M%S).txt
```

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
================================================================================
üìä –õ–û–ì–ò –ü–û–í–ï–î–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô –ó–ê –ü–û–°–õ–ï–î–ù–ò–ï 24 –ß–ê–°–ê
–ü–µ—Ä–∏–æ–¥: 2026-02-14 10:53:25 - 2026-02-15 10:53:25
================================================================================

üë§ –ù–û–í–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞ 24 —á–∞—Å–∞):
--------------------------------------------------------------------------------
  ‚Ä¢ 2026-02-15 09:30:15 | ID: a1b2c3d4 | Email: user@example.com | –¢–∞—Ä–∏—Ñ: free | ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω | IP: 192.168.1.1
–í—Å–µ–≥–æ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 1

üìÑ –ê–ù–ê–õ–ò–ó–´ –î–û–ö–£–ú–ï–ù–¢–û–í (–∑–∞ 24 —á–∞—Å–∞):
--------------------------------------------------------------------------------
  ‚Ä¢ 2026-02-15 10:00:00 | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: a1b2c3d4 (user@example.com) | –§–∞–π–ª: contract.pdf | –¢–∏–ø: –î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã | –†–∏—Å–∫: –°—Ä–µ–¥–Ω–∏–π
–í—Å–µ–≥–æ –∞–Ω–∞–ª–∏–∑–æ–≤: 5

üí≥ –ü–õ–ê–¢–ï–ñ–ò (–∑–∞ 24 —á–∞—Å–∞):
--------------------------------------------------------------------------------
  ‚Ä¢ 2026-02-15 11:00:00 | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: a1b2c3d4 (user@example.com) | –¢–∞—Ä–∏—Ñ: basic | –°—É–º–º–∞: 290.0 RUB | –°—Ç–∞—Ç—É—Å: success
–í—Å–µ–≥–æ –ø–ª–∞—Ç–µ–∂–µ–π: 1
–û–±—â–∞—è —Å—É–º–º–∞: 290.00 RUB
...
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- Python 3.6+
- –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite (`docscan.db`)
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `config.py`
- –ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, –∏–∑–º–µ–Ω–∏—Ç–µ `SQLALCHEMY_DATABASE_URI` –≤ `config.py`
- –°–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ - —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

